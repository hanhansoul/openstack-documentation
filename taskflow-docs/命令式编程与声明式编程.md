

# 命令式编程与声明式编程

## 简单定义

- 命令式编程：命令“机器”如何去做事情(how)，这样不管你想要的是什么(what)，它都会按照你的命令实现。命令式编程的主要思想是关注计算机执行的步骤， **即一步一步告诉计算机先做什么再做什么。**
- 声明式编程：告诉“机器”你想要的是什么(what)，让机器想出如何去做(how)。声明式编程是以**数据结构**的形式来表达程序执行的逻辑。 **它的主要思想是告诉计算机应该做什么，但不指定具体要怎么做。**

如果要解决以下一个问题：求一个list里所有值的和。

命令式编程：

```python
list = [1,2,3,4,5];
total = 0;

for x in list:
	total += x
	
print(total)
```

声明式编程：

```python
list = [1,2,3,4,5];

total = reduce(lambda x, y: x + y, list)

print(total)
```



## 声明式编程

声明式编程是一种编程范式，与命令式编程相对立。它描述目标的性质，让电脑明白目标，而非流程。声明式编程不用告诉电脑问题领域，从而避免随之而来的副作用。而命令式编程则需要用算法来明确的指出每一步该怎么做。

声明式编程通常被看做是形式逻辑的理论，把计算看做推导。声明式编程因大幅简化了并行计算的编写难度。

声明式语言包括数据库查询语言（SQL，XQuery），正则表达式，逻辑编程，函数式编程和组态管理系统等。

声明式编程透过函数、推理规则或重写规则，来描述变量之间的关系。它的语言运行器（编译器或解释器）采用了一个固定的算法，以从这些关系产生结果。

所有的 DSL (HTML, XML, SQL) 都是声明式的，你写出一条 SQL 语句，只是为了告诉数据库你要什么，然后数据库就会给你对应的数据，而不是通过数据库的 API 去取。

JS：

```js
// 普通的 DOM API 构建 UI
const div = document.createElement('div')
const p = document.createElement('p')
p.textContent = 'hello world'
const UI = div.append(p)
```

JS：

```js
// React 构建 UI
const h = React.craeteElement
const UI = h('div', null, h('p', null, 'hello world'))
```

SQL：

```sql
SELECT * FROM Products WHERE name='Alipay'
```



声明式编程的优势在于：开发者只需要“声明”需要做什么，而具体怎么做，则由编程语言本身在运行时去解决，这极大地提高了开发的效率。



## 声明式编程案例

1. HTML、CSS、SQL
2. 纯函数编程语言
3. React、Vue等框架利用了Virtual DOM和diff算法实现了声明式的JavaScript用户界面框架，而不需要前端开发者去使用 jQuery 或原生写法来操作 DOM。
4. Spring中的各种注解基于Java的反射实现
5. Kubernetes提供了YAML语法的配置文件，用于描述容器集群的拓扑状态，自动地向配置的声明驱动。云原生应用的一个必要特性就是声明式。

开发声明式 API 是很困难的，往往需要开发人员对语言以及框架的拥有深刻认知，并且是一种「将复杂留给自己，将方便留给别人」的美德。

单纯作为用户而言，效率、便利、无副作用是声明式 API 的目的。而作为软件开发者，去意识到这些声明式应用或框架的背后原理往往会更加明白创作者的真实意图，也能更清晰自己所做的声明、或是充分优化应用层代码。